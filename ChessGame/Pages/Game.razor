@page "/game"
@using ChessGame.Models
@using ChessGame.Services
@inject GameService GameService
@inject PlayerService PlayerService

<h3>Chess Game</h3>

<div id="gameStatus">
    @if (GameService.GameStatus == GameStatus.InProgress)
    {
        <p>Game in progress...</p>
    }
    else if (GameService.GameStatus == GameStatus.Ended)
    {
        <p>Game ended. Winner: @GameService.Winner.Name</p>
    }
</div>

<div id="chessboard">
    @foreach (var row in GameService.ChessBoard.Rows)
    {
        <div class="row">
            @foreach (var cell in row.Cells)
            {
                <div class="cell" @onclick="() => MakeMove(cell)">
                    @if (cell.ChessPiece != null)
                    {
                        <img src="@cell.ChessPiece.ImageUrl" alt="@cell.ChessPiece.Name" />
                    }
                </div>
            }
        </div>
    }
</div>

<div id="player1">
    <p>@PlayerService.Player1.Name</p>
</div>

<div id="player2">
    <p>@PlayerService.Player2.Name</p>
</div>

@code {
    private void MakeMove(Cell cell)
    {
        GameService.MakeMove(cell);
    }
}